{% extends "base.html" %}
{% load static %}
{% load extras %}

{% block content %}

    <script type="text/javascript" src="https://hpneo.dev/gmaps/gmaps.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnIrhidN5aiBFBVK9kgPDrISe0_MePQpw&callback=initMap"></script>
    <script src="https://unpkg.com/deck.gl@^7.0.0/dist.min.js"></script>
    <div class="subheader py-2 py-lg-6 subheader-solid mb-2" id="kt_subheader">
        <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
            <!--begin::Info-->
            <div class="d-flex align-items-center flex-wrap mr-1">
                <!--begin::Mobile Toggle-->
                <button class="burger-icon burger-icon-left mr-4 d-inline-block d-lg-none"
                        id="kt_subheader_mobile_toggle">
                    <span></span>
                </button>
                <!--end::Mobile Toggle-->
                <!--begin::Page Heading-->
                <div class="d-flex align-items-baseline flex-wrap mr-5">
                    <!--begin::Page Title-->
                    <h5 class="text-dark font-weight-bold my-1 mr-5">{{ totalquery.name }}</h5>
                    <!--end::Page Title-->
                    <!--begin::Breadcrumb-->
                    <ul class="breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 font-size-sm">
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">{{ totalquery.no }}</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">{{ totalquery.description }}</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">{{ totalquery.team.0 }} 4</a>
                        </li>
                    </ul>
                    <!--end::Breadcrumb-->
                </div>
                <!--end::Page Heading-->
            </div>
            <!--end::Info-->

        </div>
    </div>
    <div class="d-flex flex-row">
        <!--begin::Aside-->
        <div class="flex-row-auto offcanvas-mobile w-300px w-xl-350px" id="kt_profile_aside">
            <!--begin::Card-->
            <div class="card card-custom gutter-b">
                <!--begin::Body-->
                <div class="card-body pt-4">
                    <!--begin::User-->
                    <div class="d-flex align-items-center">
                        <div class="symbol symbol-60 symbol-xxl-100 mr-5 align-self-start align-self-xxl-center">
                            {% if totalquery.results.phone.truecaller %}
                                <div class="symbol-label"
                                     style="background-image:url({{ totalquery.results.phone.truecaller.imgurl }})"></div>
                            {% else %}
                                <div class="symbol-label"><span class="svg-icon svg-icon-primary svg-icon-6x"><!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2020-07-07-181510/theme/html/demo13/dist/../src/media/svg/icons/General/User.svg--><svg
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <polygon points="0 0 24 0 24 24 0 24"></polygon>
                            <path d="M12,11 C9.790861,11 8,9.209139 8,7 C8,4.790861 9.790861,3 12,3 C14.209139,3 16,4.790861 16,7 C16,9.209139 14.209139,11 12,11 Z"
                                  fill="#000000" fill-rule="nonzero" opacity="0.3"></path>
                            <path d="M3.00065168,20.1992055 C3.38825852,15.4265159 7.26191235,13 11.9833413,13 C16.7712164,13 20.7048837,15.2931929 20.9979143,20.2 C21.0095879,20.3954741 20.9979143,21 20.2466999,21 C16.541124,21 11.0347247,21 3.72750223,21 C3.47671215,21 2.97953825,20.45918 3.00065168,20.1992055 Z"
                                  fill="#000000" fill-rule="nonzero"></path>
                        </g>
                    </svg><!--end::Svg Icon--></span></div>
                            {% endif %}
                        </div>
                        <div>
                            <a href="#"
                               class="font-weight-bold font-size-h5 text-dark-75 text-hover-primary">{{ totalquery.results.name.search.aliases.0 }}</a>
                            <div class="text-muted">
                                {% for username in totalquery.results.name.search.username %}
                                    {{ username }},
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <!--end::User-->
                    <!--begin::Contact-->
                    <div class="pt-8 pb-6">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <span class="font-weight-bold mr-2">Email:</span>
                            <a href="#"
                               class="text-muted text-hover-primary">{{ totalquery.results.email.hunterio.data.email }}</a>
                        </div>
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <span class="font-weight-bold mr-2">Phone:</span>
                            <span class="text-muted">{{ totalquery.results.phone.getcontact.phoneNumber }}</span>
                        </div>
                        <div class="d-flex align-items-center justify-content-between">
                            <span class="font-weight-bold mr-2">Location:</span>
                            <span class="text-muted">{{ totalquery.results.phone.numverify.location }}</span>
                        </div>
                    </div>
                    <!--end::Contact-->
                    {#                    <!--begin::Contact-->#}
                    {#                    <div class="pb-6">Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in#}
                    {#                        a piece of classical.#}
                    {#                    </div>#}
                    {#                    <!--end::Contact-->#}
                    {#                    <a href="#" class="btn btn-light-success font-weight-bold py-3 px-6 mb-2 text-center btn-block">Profile#}
                    {#                        Overview</a>#}
                </div>
                <!--end::Body-->
            </div>
            <!--end::Card-->
            <!--begin::Mixed Widget 14-->
            <div class="card card-custom gutter-b">
                <!--begin::Header-->
                <div class="card-header border-0 pt-5">
                    <h3 class="card-title font-weight-bolder">Google Images</h3>

                </div>
                <!--end::Header-->
                <!--begin::Body-->
                <div class="card-body d-flex flex-column">
                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            {% for image in totalquery.results.name.search.images %}
                                <div class="carousel-item {% if forloop.counter == 1 %}
active
{% endif %} ">
                                    <img class="d-block w-100" src="{{ image }}" alt="First slide">
                                </div>
                            {% endfor %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                           data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                           data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <!--end::Body-->
            </div>
            <!--end::Mixed Widget 14-->
        </div>
        <!--end::Aside-->
        <!--begin::Content-->
        <div class="flex-row-fluid ml-lg-8">
            <!--begin::Row-->
            <div class="row">
                {% if totalquery.results.hibp %}
                    <div class="col-lg-4 col-xxl-4 order-1 order-xxl-2">
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-body" style="max-height: 420px; overflow-y: scroll; padding-top:4rem">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th scope="col">
                                            #
                                        </th>
                                        <th scope="col">
                                            Have I Been Pwned - Breached Sites
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% if hibp.Error %}
                                        <tr>
                                            <th scope="row">
                                                {{ forloop.counter }}
                                            </th>
                                            <td>{{ hibp.Error }}</td>
                                        </tr>
                                    {% else %}

                                        {% for breached in hibp %}

                                            <tr>
                                                <th scope="row">
                                                    {{ forloop.counter }}
                                                </th>
                                                <td>{{ breached.Name }}</td>
                                            </tr>

                                        {% endfor %}
                                    {% endif %}

                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <script>document.getElementById('data').value += "'hibp':{{hibp|safe}}" + ","</script>
                    </div>
                {% endif %}

                {% if ghostdata %}
                    <div class="col-lg-6 col-xxl-6 order-1 order-xxl-4">
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-body" style="max-height: 420px; overflow-y: scroll;">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th scope="col">
                                            Password
                                        </th>
                                        <th scope="col">
                                            Password Length
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% for keys,values in ghostdata.items %}
                                        <tr>
                                            <td scope="row">
                                                {{ keys }}
                                            </td>
                                            <td>
                                                {{ values }}
                                            </td>
                                        </tr>
                                    {% endfor %}

                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <script>document.getElementById('data').value += "'ghostdata':{{ghostdata|safe}}" + " "</script>
                    </div>

                {% endif %}

                {% if slideshare != None %}
                    <div class="col-lg-6 col-xxl-6 order-1 order-xxl-4">
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-body" style="max-height: 420px; overflow-y: scroll;">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th scope="col">
                                            <center>#</center>
                                        </th>
                                        <th scope="col">
                                            <center>Slideshare - Slide Title</center>
                                        </th>
                                        <th scope="col">
                                            <center>Link</center>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% for title, link in slideshare.slides.items %}

                                        <tr>
                                            <th scope="row">
                                                <center>{{ forloop.counter }}</center>
                                            </th>
                                            <td>{{ title }}</td>
                                            <td>
                                                <center><a href="{{ link }}" target="_blank"
                                                           class="btn btn-primary btn-sm"
                                                           role="button"
                                                           aria-disabled="true">Open</a></center>
                                            </td>
                                        </tr>

                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <script>document.getElementById('data').value += "'slideshare':{{slideshare|safe}}" + ","</script>
                    </div>

                {% endif %}

                {% if emailrep %}
                    <div class="col-lg-6 col-xxl-6 order-1 order-xxl-4">
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-header border-0 pt-5">
                                <div class="card-title">
                                    <div class="card-label">
                                        <div class="font-weight-bolder">Email Rep Results</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body" style="max-height: 420px; overflow-y: scroll">
                                {% if status not in emailrep.keys %}
                                    {% for keys,values in emailrep.items %}
                                        {% if values.items %}
                                            {% for key1,value1 in values.items %}
                                                {% if key1 == "profiles" %}
                                                    <p class="card-text" align="left"><strong>{{ key1 }} : </strong><p>
                                                    {% for profile in value1 %}
                                                        <p class="card-text" align="left" style="margin-left: 25px;">
                                                            <strong>{{ forloop.counter }} : </strong> {{ profile }}</p>
                                                    {% endfor %}
                                                {% else %}
                                                    <p class="card-text" align="left"><strong>{{ key1 }}
                                                        : </strong> {{ value1 }}
                                                    </p>
                                                {% endif %}
                                            {% endfor %}
                                        {% else %}
                                            <p class="card-text" align="left"><strong>{{ keys }}
                                                : </strong> {{ values }}</p>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                        <script>document.getElementById('data').value += "'emailrep':{{emailrep|safe}}" + ","</script>
                    </div>

                {% endif %}

                {% if hunterio %}
                    <div class="col-lg-6 col-xxl-6 order-1 order-xxl-4">
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-header border-0 pt-5">
                                <div class="card-title">
                                    <div class="card-label">
                                        <div class="font-weight-bolder">Hunter.io Scan Results</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body" style="max-height: 420px; overflow-y: scroll;">
                                {% if hunterio.Error %}
                                    <p class="card-text">{{ hunterio.Error }}</p>
                                {% else %}

                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Result
                                        : </strong> {{ hunterio.data.result }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Score
                                        : </strong> {{ hunterio.data.score }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Email
                                        : </strong> {{ hunterio.data.email }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Disposable
                                        : </strong> {{ hunterio.data.disposable }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Webmail
                                        : </strong> {{ hunterio.data.webmail }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>MX Records
                                        : </strong> {{ hunterio.data.mx_records }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>SMTP Server
                                        : </strong> {{ hunterio.data.smtp_server }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>SMTP Check
                                        : </strong> {{ hunterio.data.smtp_check }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Accept All
                                        : </strong> {{ hunterio.data.accept_all }}</p>
                                    <p class="card-text" align="left" style="margin-left: 25px;"><strong>Block
                                        : </strong> {{ hunterio.data.block }}</p>

                                    {% if hunterio.data.sources %}
                                        <p class="card-text" align="left"><strong>Sources : </strong></p>

                                        {% for i in hunterio.data.sources %}

                                            <p class="card-text" align="left" style="margin-left: 25px;">
                                                <strong>{{ forloop.counter }}.
                                                    Domain : </strong> {{ i.domain }}</p>
                                            <p class="card-text" align="left" style="margin-left: 50px;"><strong>URL
                                                : </strong> {{ i.uri }}</p>
                                            <p class="card-text" align="left" style="margin-left: 50px;"><strong>Extracted
                                                On
                                                : </strong> {{ i.extracted_on }}</p>
                                            <p class="card-text" align="left" style="margin-left: 50px;"><strong>Last
                                                Seen On
                                                : </strong> {{ i.last_seen_on }}</p>
                                            <p class="card-text" align="left" style="margin-left: 50px;"><strong>Still
                                                on Page
                                                : </strong> {{ i.still_on_page }}</p>

                                        {% endfor %}
                                    {% endif %}


                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <script>document.getElementById('data').value += "'hunterio':{{hunterio|safe}}" + ","</script>
                {% endif %}

                {% if social.fbdata and not social.fbdata.Error %}
                    <div class="col-lg-4 col-xxl-4 order-1 order-xxl-2">
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-header ribbon ribbon-clip ribbon-right">
                                <div class="ribbon-target" style="top: 15px; height: 45px;">
                                    <span class="ribbon-inner bg-facebook"></span>
                                    <i class="socicon-facebook"></i>
                                </div>
                                <h3 class="card-title">Facebook</h3>
                            </div>
                            <div class="card-body d-flex flex-column justify-content-between"
                                 style="max-height: 430px; overflow-y: scroll">
                                <div class="d-flex align-items-center mb-7">
                                    <!--begin::Pic-->
                                    <div class="flex-shrink-0 mr-4 mt-lg-0 mt-3">
                                        <div class="symbol symbol-lg-75">
                                            <img alt="Pic" src="{{ social.fbdata.ProfilePic }}">
                                        </div>
                                        <div class="symbol symbol-lg-75 symbol-primary d-none">
                                            <span class="font-size-h3 font-weight-boldest">{{ social.fbdata.Name.0 }}</span>
                                        </div>
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Title-->
                                    <div class="d-flex flex-column">
                                <span
                                        class="text-dark font-weight-bold font-size-h4 mb-0">{{ social.fbdata.Name }}</span>
                                        <a href="#"
                                           class="font-weight-bold text-primary pr-1 text-hover-primary">{{ social.fbdata.Contact }}</a>
                                    </div>
                                    <!--end::Title-->
                                </div>
                                <p class="mb-7">
                                    {% for keys, value in social.fbdata.Work_Education.items %}
                                        <span class="d-block font-weight-bold text-dark">{{ keys }}</span>
                                        {% for value1 in value %}
                                            {% if value1 %}
                                                <span class="label label-light-info label-inline p-2 mb-2">{{ value1 }}</span>
                                                <br/>
                                            {% endif %}
                                        {% endfor %}
                                    {% endfor %}
                                </p>
                            </div>
                        </div>
                        <!--end::Card-->
                    </div>
                {% endif %}

                {% if social.instadata and not social.instadata.Error %}
                    <div class="col-lg-4 col-xxl-4 order-1 order-xxl-2">
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-header ribbon ribbon-clip ribbon-right">
                                <div class="ribbon-target" style="top: 15px; height: 45px;">
                                    <span class="ribbon-inner bg-instagram"></span>
                                    <i class="socicon-instagram"></i>
                                </div>
                                <h3 class="card-title">Instagram</h3>
                            </div>
                            <div class="card-body d-flex flex-column justify-content-between"
                                 style="max-height: 420px; overflow-y: scroll; padding-top:4rem">
                                <div class="d-flex align-items-center mb-7">
                                    <!--begin::Pic-->
                                    <div class="flex-shrink-0 mr-4 mt-lg-0 mt-3">
                                        <div class="symbol symbol-lg-75">
                                            <img alt="Pic" src="{{ social.instadata.ProfilePic }}">
                                        </div>
                                        <div class="symbol symbol-lg-75 symbol-primary d-none">
                                            <span class="font-size-h3 font-weight-boldest">{{ social.instadata.Name.0 }}</span>
                                        </div>
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Title-->
                                    <div class="d-flex flex-column">
                                <span
                                        class="text-dark font-weight-bold font-size-h4 mb-0">{{ social.instadata.Name }}</span>
                                        <a href="#"
                                           class="font-weight-bold text-primary pr-1 text-hover-primary">{{ social.instadata.URL }}</a>
                                    </div>
                                    <!--end::Title-->
                                </div>
                                <div class="mt-7">
                                    <p><strong>BIO: </strong></p>
                                    <p>{{ social.instadata.Bio }}</p>
                                    <p><strong>Followers :</strong> {{ social.instadata.Followers }}</p>
                                    <p><strong>Following :</strong> {{ social.instadata.Following }}</p>
                                    <p><strong>No Of Posts :</strong> {{ social.instadata.No_of_posts }}</p>
                                    <p><strong>Location :</strong></p>
                                    {% if social.instadata.Location %}
                                        {% for value in social.instadata.Location %}
                                            <p>{{ value }}</p>
                                        {% endfor %}
                                    {% else %}
                                        <p>Not Found</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <!--end::Card-->
                    </div>
                {% endif %}

                {% if social.twitterdata and not social.twitterdata.Error %}
                    <div class="col-lg-4 col-xxl-4 order-1 order-xxl-2">
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b card-stretch">
                            <div class="card-header ribbon ribbon-clip ribbon-right">
                                <div class="ribbon-target" style="top: 15px; height: 45px;">
                                    <span class="ribbon-inner bg-twitter"></span>
                                    <i class="socicon-twitter"></i>
                                </div>
                                <h3 class="card-title">Twitter</h3>
                            </div>
                            <div class="card-body d-flex flex-column justify-content-between"
                                 style="max-height: 420px; overflow-y: scroll; padding-top:4rem">
                                <div class="d-flex align-items-center mb-7">
                                    <!--begin::Pic-->
                                    <div class="flex-shrink-0 mr-4 mt-lg-0 mt-3">
                                        <div class="symbol symbol-lg-75">
                                            <img alt="Pic" src="{{ social.twitterdata.ProfilePic }}">
                                        </div>
                                        <div class="symbol symbol-lg-75 symbol-primary d-none">
                                            <span class="font-size-h3 font-weight-boldest">{{ social.twitterdata.User_Name.0 }}</span>
                                        </div>
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Title-->
                                    <div class="d-flex flex-column">
                                <span
                                        class="text-dark font-weight-bold font-size-h4 mb-0">{{ social.twitterdata.User_Name }}</span>
                                        <a href="#"
                                           class="font-weight-bold text-primary pr-1 text-hover-primary">{{ social.twitterdata.Web_Link }}</a>
                                    </div>
                                    <!--end::Title-->
                                </div>
                                <div class="mt-7">
                                    <p><strong>User ID :</strong> {{ social.twitterdata.User_Id }}</p>
                                    <p><strong>BIO :</strong> {{ social.twitterdata.Description }}</p>
                                    <p><strong>Location :</strong> {{ social.twitterdata.Location }}</p>
                                    <p><strong>Web Link :</strong> {{ social.twitterdata.Web_Link }}</p>
                                    <p><strong>Twitter Joined Date :</strong> {{ social.twitterdata.Twitter_Join_Date }}
                                    </p>
                                    <p><strong>Birthday :</strong> {{ social.twitterdata.Birthday }}</p>
                                    <p><strong>Followers :</strong> {{ social.twitterdata.Followers }}</p>
                                    <p><strong>Following :</strong> {{ social.twitterdata.Following }}</p>
                                    <p><strong>No Of Tweets :</strong> {{ social.twitterdata.Total_Tweets }}</p>
                                    <p><strong>Tweets :</strong></p>
                                    <div class="timeline timeline-5 mt-3">
                                        <!--begin::Item-->
                                        {% for value in social.twitterdata.Tweets.values %}
                                            <div class="timeline-item align-items-start">
                                                <!--begin::Label-->
                                                <div class="timeline-label font-weight-bolder text-dark-75 font-size-lg">
                                                    00:00
                                                </div>
                                                <!--end::Label-->
                                                <!--begin::Badge-->
                                                <div class="timeline-badge">
                                                    <i class="socicon-twitter text-twitter icon-xl"></i>
                                                </div>
                                                <!--end::Badge-->
                                                <!--begin::Text-->
                                                <div class="font-weight-mormal font-size-lg timeline-content text-muted pl-3">
                                                    Outlines keep you honest. And keep structure
                                                </div>
                                                <!--end::Text-->
                                            </div>
                                        {% endfor %}
                                        <!--end::Item-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--end::Card-->
                    </div>
                {% endif %}
            </div>
            <!--end::Row-->
        </div>
        <!--end::Content-->
    </div>
{% endblock %}