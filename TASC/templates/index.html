
{% extends "base.html" %}

{% load static %}

{% block content %}

{% if request.user.profile.darkmode %}

  <script>
    var options = {
    bottom: '64px', // default: '32px'
    right: 'unset', // default: '32px'
    left: '32px', // default: 'unset'
    time: '0.5s', // default: '0.3s'
    mixColor: '#fff', // default: '#fff'
    backgroundColor: '#fff',  // default: '#fff'
    buttonColorDark: '#100f2c',  // default: '#100f2c'
    buttonColorLight: '#fff', // default: '#fff'
    saveInCookies: true, // default: true,
    label: 'ðŸŒ“', // default: ''
    autoMatchOsTheme: true // default: true
  }
  const darkmode = new Darkmode(options);
  </script>

  {% endif %}

<script>
  jQuery('searchbar').click(function(){ 
  jQuery(alert(1));
  jQuery('<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>').prependTo(document.body); 
});
</script>


<html>
  <head>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>TASC</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/tasc-search.css' %}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  </head>
  <body>
  <br>
  <br> 
    <div class="container col-md-6 h-100">
      <div class="d-flex justify-content-center h-100">
        <form name="submitForm" method="POST" onsubmit="return validation()"> {% csrf_token %}
          <div class="searchbar" >
            <input class="search_input" type="text" name="query" id="query" placeholder="Enter Suspect Details">
            <a href="javascript:validation()" onclick="loader()" class="search_icon"><i class="fas fa-search"></i></a>
            <div class="text-center" id="loader" style="display:none"><br>
              <div class="spinner-border text-primary" role="status">
                <span class="sr-only">Loading...</span>
              </div>
            </div>
          <br><br>
          </div>
        </form>
        </div>
      </div>
  
  <script>
  function loader() {
    $('#loader').show(); 
  }
  function validation(){
    var query=document.getElementById('query').value.split(":");
    if(query.length>=2){
      if(["social","facebook","instagram","twitter"].indexOf(query[0])>=0){
        if (/^[a-zA-Z\-]+$/.test(query[1])==false){
          alert("Invalid Username");return false;
        }        
      }
      else if (query[0]=="ip"){
          if (/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/.test(quer[1])==false) {
            alert("Invalid IP");return false;
        }
      }
      else if(query[0]=="mac"){
        if (/^(?:[0-9A-F]{2}[:]?){5}(?:[0-9A-F]{2}?)$/.test(document.getElementById('query').value.split(':').slice(1).join(':'))==false){
          alert("Invalid MAC");return false;
        }
      }
      else if(query[0]=="phone"){
        if (/^\+(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{1,14}$/.test(query[1])==false){
          alert("Invalid Number");return false;
        }
      }
      else if(query[0]=="email"){
        if (/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(query[1])==false){
          alert("Invalid Email ID");return false;
        }
      }
      else if(query[0]=="domain"){
        if (/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(query[1])==false){
          alert("Invalid Domain Name");return false;
        }
        document.submitForm.submit()
      }
    }else{
      alert("Invalid Query")
      return false;
    }
  }
  </script>
      <div class="container h-100">
      <div class="d-flex justify-content-center h-100">
      {% if error %}
      <div class="alert alert-danger alert-dismissible col-md-6" id="danger-alert">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <p class="card-text"><center><strong>ERROR : </strong>{{error}}</center></p>
      </div>

      <script>
        $("#danger-alert").fadeTo(2000, 500).slideUp(500, function(){
        $("#danger-alert").slideUp(500);
      });
      </script>
      {% endif %}
    </div></div>

    <script>
      var input = document.getElementById("query");
      input.addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
         loader();
         event.preventDefault();
         document.submitForm.submit()
        }
      });
      </script>
<br><br>

<div class="container table-responsive"> 
  <table class="table table-bordered table-striped table-hover">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Search Type</th>
        <th scope="col">Keyword</th>
        <th scope="col">Example</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">1</th>
        <td>Social Network</td>
        <td><mark>social:username</mark></td>
        <td>social:thoatta</td>
      </tr>
      <tr>
        <th scope="row">2</th>
        <td>Facebook</td>
        <td><mark>facebook:username</mark></td>
        <td>facebook:thoatta</td>
      </tr>
      <tr>
        <th scope="row">3</th>
        <td>Twitter</td>
        <td><mark>twitter:username</mark></td>
        <td>twitter:thoatta</td>
      </tr>
      <tr>
        <th scope="row">4</th>
        <td>Instagram</td>
        <td><mark>instagram:username</mark></td>
        <td>instagram:thoatta</td>
      </tr>
      <tr>
        <th scope="row">5</th>
        <td>Phone Number</td>
        <td><mark>phone:number</mark></td>
        <td>phone:+91701095****</td>
      </tr>
      <tr>
        <th scope="row">6</th>
        <td>Email ID</td>
        <td><mark>email:email_id</mark></td>
        <td>email:adithyanhaxor@gmail.com</td>
      </tr>
      <tr>
        <th scope="row">7</th>
        <td>IP Address</td>
        <td><mark>ip:ipv4_address</mark></td>
        <td>ip:182.72.162.16</td>
      </tr>
      <tr>
        <th scope="row">8</th>  
        <td>Domain Name</td>
        <td><mark>domain:domain_name</mark></td>
        <td>domain:www.adithyanak.in</td>
      </tr>
      <tr>
        <th scope="row">9</th>
        <td>Mac Address</td>
        <td><mark>mac:mac_address</mark></td>
        <td>mac:FC:FB:FB:01:FA:21</td>
      </tr>
      <tr>
        <th scope="row">10</th>
        <td>BitCoin Information</td>
        <td><mark>btc:address</mark></td>
        <td>btc:1DST3gm6JthxhuoNKFqXrdpzPFfz1WgHpW</td>
      </tr>
      <tr>
        <th scope="row">11</th>
        <td>Facebook Keyword Search</td>
        <td><mark>fbsearch:keyword</mark></td>
        <td>fbsearch:google</td>
      </tr>
    </tbody>
  </table>
</div>

  </body>
</html>

{% endblock %}